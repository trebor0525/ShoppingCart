{"ast":null,"code":"import { getApiUrl } from \"./apiConfig\";\nimport axios from \"axios\";\nexport const submitLogin = props => {\n  const {\n    loginData,\n    setWrongCredentials,\n    navigate,\n    setOpen,\n    setLoading\n  } = props;\n  const loginUrl = getApiUrl('auth/login');\n  setLoading(true);\n  axios.post(loginUrl, loginData, {\n    withCredentials: true\n  }).then(() => {\n    setLoading(false);\n    navigate('/store', {\n      replace: true\n    });\n  }).catch(error => {\n    setWrongCredentials({\n      wrongDate: true,\n      infoText: error.response.data.Message\n    });\n    setOpen(true);\n    setLoading(false);\n  });\n};\nexport const submitRegister = props => {\n  const {\n    registerData,\n    setRegisterData,\n    setWrongData,\n    setOpen,\n    navigate,\n    setLoading\n  } = props;\n  const registerUrl = getApiUrl('auth/register');\n  setLoading(true);\n  axios.post(registerUrl, registerData).then(response => {\n    setRegisterData({\n      userName: \"\",\n      email: \"\",\n      password: \"\"\n    });\n    setWrongData({\n      status: false,\n      infoText: response.data.infoMessage\n    });\n    setOpen(true);\n    setLoading(false);\n    navigate('/', {\n      replace: false\n    });\n  }).catch(error => {\n    setWrongData({\n      status: true,\n      infoText: error.response.data.infoMessage\n    });\n    setOpen(true);\n    setLoading(false);\n  });\n};\nexport const getUserDetails = _ref => {\n  let {\n    setUserRole\n  } = _ref;\n  const userDetailsUrl = getApiUrl('auth/details');\n  axios.get(userDetailsUrl, {\n    withCredentials: true\n  }).then(userDetails => {\n    setUserRole(userDetails.data.roles);\n    const cartCountUrl = getApiUrl(`shoppingList/count/${userDetails.data.id}`);\n    axios.get(cartCountUrl, {\n      withCredentials: true\n    }).then(response => {\n      localStorage.setItem(\"number\", response.data.toString());\n      window.dispatchEvent(new Event('storage'));\n    });\n  });\n};\nexport const logout = _ref2 => {\n  let {\n    navigate\n  } = _ref2;\n  const logoutUrl = getApiUrl('auth/logout');\n  axios.get(logoutUrl, {\n    withCredentials: true\n  }).then(() => {\n    navigate('/', {\n      replace: true\n    });\n  });\n};","map":{"version":3,"names":["getApiUrl","axios","submitLogin","props","loginData","setWrongCredentials","navigate","setOpen","setLoading","loginUrl","post","withCredentials","then","replace","catch","error","wrongDate","infoText","response","data","Message","submitRegister","registerData","setRegisterData","setWrongData","registerUrl","userName","email","password","status","infoMessage","getUserDetails","setUserRole","userDetailsUrl","get","userDetails","roles","cartCountUrl","id","localStorage","setItem","toString","window","dispatchEvent","Event","logout","logoutUrl"],"sources":["C:/Users/TreborTI/IdeaProjects/ShoppingCartFront/src/services/auth.js"],"sourcesContent":["import { getApiUrl } from \"./apiConfig\";\r\nimport axios from \"axios\";\r\n\r\nexport const submitLogin = (props) => {\r\n    const { loginData, setWrongCredentials, navigate, setOpen, setLoading } = props\r\n    const loginUrl = getApiUrl('auth/login')\r\n    setLoading(true)\r\n    axios.post(loginUrl, loginData, { withCredentials: true })\r\n    .then(() => {\r\n        setLoading(false)\r\n        navigate('/store', { replace: true })\r\n    }).catch(error => {\r\n        setWrongCredentials({ wrongDate: true, infoText: error.response.data.Message })\r\n        setOpen(true)\r\n        setLoading(false)\r\n    })\r\n}\r\n\r\n\r\nexport const submitRegister = (props) => {\r\n    const { registerData, setRegisterData, setWrongData, setOpen, navigate, setLoading } = props\r\n    const registerUrl = getApiUrl('auth/register')\r\n    setLoading(true)\r\n    axios.post(registerUrl, registerData).then(response => {\r\n        setRegisterData({ userName: \"\", email: \"\", password: \"\" })\r\n        setWrongData({ status: false, infoText: response.data.infoMessage })\r\n        setOpen(true)\r\n        setLoading(false)\r\n        navigate('/', { replace: false })\r\n    }).catch(error => {\r\n        setWrongData({ status: true, infoText: error.response.data.infoMessage })\r\n        setOpen(true)\r\n        setLoading(false)\r\n    })\r\n}\r\nexport const getUserDetails = ({ setUserRole }) => {\r\n    const userDetailsUrl = getApiUrl('auth/details')\r\n    axios.get(userDetailsUrl, { withCredentials: true }).then(userDetails => {\r\n        setUserRole(userDetails.data.roles)\r\n        const cartCountUrl = getApiUrl(`shoppingList/count/${userDetails.data.id}`)\r\n        axios.get(cartCountUrl, { withCredentials: true }).then(response => {\r\n            localStorage.setItem(\"number\", response.data.toString())\r\n            window.dispatchEvent(new Event('storage'))\r\n        })\r\n    })\r\n}\r\nexport const logout = ({ navigate }) => {\r\n    const logoutUrl = getApiUrl('auth/logout')\r\n    axios.get(logoutUrl, { withCredentials: true }).then(() => {\r\n        navigate('/', { replace: true })\r\n    })\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}